name: Get Repository Secrets

on:
  push:
    branches: ["test"]

jobs:
  get_secrets:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v3

      - name: Retrieve secrets
        id: secrets
        run: |
          secrets=$(curl -s -H "Authorization: Bearer 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" https://api.github.com/repos/josliniyda27/export-secrets/actions/secrets )
          sleep 30
          echo "$(secrets)"
          # sleep 20 
          # secret_names = $( jq -r '.secrets[].name')
          # for secret_name in "${secrets[@]}"; do
          #   echo "${secret_name}=${secrets.${secret_name}}" >> secrets.txt
          # done
          #  cat secrets.txt
        
